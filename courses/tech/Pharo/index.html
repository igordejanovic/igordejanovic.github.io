<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Pharo</title>
<meta name="author" content="Igor Dejanović"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="../../reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="../../reveal.js/css/theme/simple.css" id="theme"/>

<link rel="stylesheet" href="../../reveal-slides.css"/>

<link rel="stylesheet" href="../../highlight-styles/docco.css"/>
<link rel="stylesheet" href=""/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = '../../reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<base target="_blank">
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide">
<h1 class="title">Pharo</h1>
<h2 class="subtitle">Bazirano na <a href="http://mooc.pharo.org">Pharo MOOC</a></h2>
<h2 class="author">Prof. dr Igor Dejanović (<a href="mailto:igord at uns ac rs">igord at uns ac rs</a>)</h2>
<p class="date">Kreirano 2020-01-05 Sun 13:54, pritisni ESC za mapu, m za meni, Ctrl+Shift+F za pretragu</p>
</section>

<section>
<section id="slide-1">
<h2 id="1"><span class="section-number-2">1</span> Smalltalk</h2>
<div class="outline-text-2" id="text-1">
</div>
</section>
<section id="slide-1-1">
<h3 id="1-1"><span class="section-number-3">1.1</span> Smalltalk</h3>
<blockquote>
<p>
Smalltalk is dangerous. It is a drug. My advice to you would be don't try it; it
could ruin your life. Once you take the time to learn it (to REALLY learn it)
you will see that there is still nothing out there that can quite touch it.
</p>

<p>
&#x2013; Andy Bower
</p>
</blockquote>
</section>
<section id="slide-1-2">
<h3 id="1-2"><span class="section-number-3">1.2</span> Šta je Smalltalk?</h3>
<ul>
<li>Objektno-orijentisani dinamički reflektivni jezik.</li>
<li>Xerox PARC - Alan Kay, Dan Ingalls i drugi - tokom 70-ih.</li>
<li>Uticao na razvoj Actor model obrasca.</li>
<li>Nastao pod uticajem Simule (prvi OO jezik, Norwegian Computing Center u Oslu -
60-te).</li>
<li>Jedan od najuticajnijih jezika.</li>
<li>Napredni koncepti: sve je objekat, razmena poruka, "živ" sistem, virtualna
mašina.</li>
<li>Konstrukcionistički pristup programiranju.</li>

</ul>
</section>
<section id="slide-1-3">
<h3 id="1-3"><span class="section-number-3">1.3</span> Istorijat</h3>
<ul>
<li>Razvijen u par dana 1971 godine (<i>Smalltalk-71</i>) zbog opklade (Alan Kay).</li>
<li>Kasnija verzija <i>Smalltalk-72</i> je korišćena u istraživanjima.</li>
<li><i>Smalltalk-76</i> - nasleđivanje klasa, razvojno okruženje</li>
<li>Najpoznatija verzija Smalltalk-80 - meta-klase. Prva verzija dostupna van
PARC-a (Apple, HP, DEC, UC Berkeley)</li>
<li>Standardizovan - ANSI 1998</li>

</ul>
</section>
<section id="slide-1-4">
<h3 id="1-4"><span class="section-number-3">1.4</span> Smalltalk implementacije</h3>
<ul>
<li>Komercijalne
<ul>
<li><i>Smalltalk-80</i> (PARC)</li>
<li><i>VisualWorks</i> (ParcPlace Systems, prodato 1999 firmi Cincom)</li>
<li><i>IBM VisualAge</i> - napušteno u korist Jave. Današnji Eclipse je započeo kao
VisualAge Smalltalk okruženje. Jedno vreme je i Java podrška bila
implementirana u Smalltalk-u.</li>

</ul></li>

<li>FLOSS:
<ul>
<li>Squeak (moderna verzija Smalltalk-80) - Apple -&gt; Disney -&gt; HP Labs -&gt; SAP Labs
-&gt; Y Combinator</li>
<li>Pharo - fork Squeak-a (2008) sa ciljem upotrebe u istraživanju i komercijalnim
projektima (Pharo consortium, Pharo association)</li>
<li>Amber Smalltalk - Smalltalk u JavaScipt-u</li>

</ul></li>

</ul>
</section>
<section id="slide-1-5">
<h3 id="1-5"><span class="section-number-3">1.5</span> Familija Smalltalk i vezanih jezika</h3>

<div class="figure">
<p><img src="./slike/smalltalk-history.png" alt="smalltalk-history.png" width="120%" />
</p>
</div>

<p class="footer" style="clear: both;">
<a href="http://courses.cs.washington.edu/courses/cse341/04wi/lectures/16-smalltalk-intro.html" class="footer" style="clear: both;">http://courses.cs.washington.edu/courses/cse341/04wi/lectures/16-smalltalk-intro.html</a>
</p>

</section>
</section>
<section>
<section id="slide-2">
<h2 id="2"><span class="section-number-2">2</span> Pharo uvod</h2>
<div class="outline-text-2" id="text-2">
</div>
</section>
<section id="slide-2-1">
<h3 id="2-1"><span class="section-number-3">2.1</span> Pharo</h3>
<ul>
<li>Pravi OO jezik ("sve je objekat") + IDE!</li>
<li>Inspirisan Smalltalk-om</li>
<li>Aktivna zajednica</li>
<li>"Živ" sistem.</li>
<li>Jednostavan i moćan objektni model</li>
<li>Radi na Mac OSX, Linux, iOS, Android, Windows, Pi.</li>
<li>100% MIT</li>
<li><a href="https://github.com/pavel-krivanek/pharoMaterials/blob/master/features/PharoKeyFeatures.md">Pregled nekih osobina Pharo IDE i jezika</a></li>

</ul>

</section>
<section id="slide-2-2">
<h3 id="2-2"><span class="section-number-3">2.2</span> Pharo instalacija</h3>
<ul>
<li>Preporučena upotreba <a href="http://get.pharo.org">Pharo Launcher</a> alata
<ul>
<li>Instalacija i upravljanje slikama i virtualnim mašinama</li>

</ul></li>

<li>Alternativno:</li>

</ul>

<div class="org-src-container">

<pre><code class=" shell" ># 64bit version
mkdir pharo
cd pharo
curl -L https://get.pharo.org/64/ | bash
# or if curl is not available:
wget -O- https://get.pharo.org/64 | bash
</code></pre>
</div>

<div class="org-src-container">

<pre><code class=" shell" ># 32bit version
curl -L https://get.pharo.org | bash
# or if curl is not available:
wget -O- https://get.pharo.org | bash
</code></pre>
</div>

</section>
<section id="slide-2-3">
<h3 id="2-3"><span class="section-number-3">2.3</span> Pharo fajl komponente</h3>
<pre  class="example">
pharo
Pharo7.0-32bit-890f474.sources
Pharo.changes
Pharo.image
pharo-ui
pharo-vm
</pre>

<ul>
<li><code>pharo-vm</code> - Pharo virtuelna mašina (<i>OS-specific</i>)</li>
<li><code>Pharo.image</code> - Perzistirano stanje/objekti</li>
<li><code>Pharo...sources</code> - Izvorni kod izdanja</li>
<li><code>Pharo.changes</code> - Promene u izvornom kodu od početka upotrebe</li>

</ul>

</section>
<section>

<ul>
<li><code>Pharo.image</code> i <code>Pharo.changes</code> su fajlovi gde dolazi do promena</li>
<li><code>Pharo.changes</code> se menja kada menjamo kod</li>
<li><code>Pharo.image</code> se menja kada eksplicitno tražimo perzistenciju stanja</li>

</ul>

</section>
<section id="slide-2-4">
<h3 id="2-4"><span class="section-number-3">2.4</span> Cela sintaksa</h3>
<p>
Staje na jedan slajd:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >exampleWithNumber: x
    "A method that illustrates every part of Smalltalk method syntax."
    &lt;menu&gt;
    | y |
    true &amp; false not &amp; (nil isNil) ifFalse: [self halt].
    y := self size + super size.
    #($a #a "a" 1 1.0)
        do: [ :each |
            Transcript show: (each class name);
                       show: (each printString);
                       show: ' '].
    ^x &lt; y
</code></pre>
</div>

</section>
<section id="slide-2-5">
<h3 id="2-5"><span class="section-number-3">2.5</span> Model</h3>
<ul>
<li>Dinamički tipiziran</li>
<li>Sve je objekat tj. instanca klase</li>
<li>Sve metode su javne i virtualne</li>
<li>Svi atributi su zaštićeni</li>
<li>Jednostruko nasleđivanje (<i>Single inheritance</i>)</li>

</ul>

</section>
<section id="slide-2-6">
<h3 id="2-6"><span class="section-number-3">2.6</span> Napisan u samom sebi</h3>
<ul>
<li>Sve je napisano u Pharo!</li>
<li><p>
Jednostavna sintaksa/model za pristup svemu.
</p>


<div class="figure">
<p><img src="./slike/hands.jpg" alt="hands.jpg" />
</p>
</div></li>

</ul>

</section>
<section id="slide-2-7">
<h3 id="2-7"><span class="section-number-3">2.7</span> Introspekcija</h3>
<ul>
<li>Pharo nije "crna kutija".</li>
<li>Sve što vidite su objekti sa kojima možete stupiti u interakciju i menjati ih
"naživo".</li>
<li><p>
Npr. <code>Alt+Shift+Click</code> -&gt; Halo hendleri!
</p>


<div class="figure">
<p><img src="./slike/halo.png" alt="halo.png" />
</p>
</div></li>

</ul>

</section>
<section id="slide-2-8">
<h3 id="2-8"><span class="section-number-3">2.8</span> Samo objekti, poruke&#x2026;</h3>
<ul>
<li><i>Objekti</i>: mouse pointer, booleans, arrays, numbers, strings, windows, files,
sound, url, socket, font, text, streams&#x2026;</li>
<li><i>Poruke (messages)</i>: <code>size</code>, <code>+</code>, <code>at:put:</code>, <code>do:</code>, <code>collect:</code>,
<code>ifTrue:ifFalse:</code>&#x2026;</li>
<li>Poruke predstavljaju <b><b>nameru</b></b> (šta treba uraditi). Metode opisuju kako treba
nešto uraditi.</li>
<li>Objekat koji prima poruku zovemo <b><b>prijemnikom</b></b> (<i>receiver</i>).</li>

</ul>

</section>
<section id="slide-2-9">
<h3 id="2-9"><span class="section-number-3">2.9</span> &#x2026; i blokovi (<i>Block Closures</i>)</h3>
<ul>
<li>Blokovi su vrsta anonimnih metoda.</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >4 timesRepeat:
    [ Transcript show: 'Hello World!']
</code></pre>
</div>

<ul>
<li>Blokovi se navode unutar <code>[]</code>.</li>

</ul>

</section>
<section id="slide-2-10">
<h3 id="2-10"><span class="section-number-3">2.10</span> Jednostavan, elegantan i uniforman model</h3>
<ul>
<li><i>Sve</i> je objekat tj. instanca klase.
<ul>
<li>Klase i poruke su takođe objekti.</li>

</ul></li>
<li>Svo procesiranje se obavlja <b><b>razmenom poruka</b></b> (<i>message passing</i>) između
objekata.</li>

<li>Koristimo izraz <b><b>slanje poruke</b></b> jer:
<ul>
<li>metode se određuju dinamički</li>
<li><b><b>kasno povezivanje</b></b> (<i>late binding</i>), samo virtuelni pozivi</li>

</ul></li>

<li>Postoji <b><b>samo jedan</b></b> mehanizam za pretragu metoda za sve objekte.</li>

</ul>

</section>
<section id="slide-2-11">
<h3 id="2-11"><span class="section-number-3">2.11</span> Pharo objektni model</h3>
<ul>
<li>Atributi instanci (<i>instance variables</i>) su zaštićeni (<i>protected</i>):
<ul>
<li>Privatni za objekat</li>
<li>Dostupni podklasama</li>

</ul></li>
<li>Metode su javne (<i>public</i>) i virtualne.</li>
<li>Jednostruko nasleđivanje klasa.</li>

</ul>

</section>
<section id="slide-2-12">
<h3 id="2-12"><span class="section-number-3">2.12</span> Slanje poruka</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >Date today

Date today + 3 days

2 + 3

(point1 x * point2 y) - (point1 y * point2 x)
</code></pre>
</div>

</section>
<section id="slide-2-13">
<h3 id="2-13"><span class="section-number-3">2.13</span> Kreiranje objekata</h3>
<p>
Obavlja se slanjem poruke drugom objektu
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >10@20
</code></pre>
</div>

<p>
Nova instanca klase <code>Point</code> se kreira:
</p>

<ul>
<li>slanjem poruke <code>@</code></li>
<li>objektu <code>10</code> (<code>SmallInteger</code>)</li>
<li>sa argumentom <code>20</code> (<code>SmallInteger</code>)</li>

</ul>

</section>
<section id="slide-2-14">
<h3 id="2-14"><span class="section-number-3">2.14</span> Kreiranje objekata - String</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >'Pharo', 'is cool!'
=&gt; 'Pharo is cool!'
</code></pre>
</div>

<p>
Novi string se kreira spajanjem dva stringa tako što:
</p>
<ul>
<li>se šalje poruka <code>,</code></li>
<li>stringu <code>'Pharo'</code></li>
<li>sa parametrom <code>'is cool!'</code></li>

</ul>

</section>
<section id="slide-2-15">
<h3 id="2-15"><span class="section-number-3">2.15</span> Kreiranje objekata</h3>
<p>
Slanjem poruke <code>new</code> ili <code>new:</code> klasi
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Monster new
=&gt; aMonster
</code></pre>
</div>

<p>
U prethodnom primeru <code>Monster</code> je ime klase a <code>new</code> je poruka koja se šalje ovoj
klasi. Rezultat je nova instanca klase <code>Monster</code>.
</p>

<p>
Kreiranje niza dužine 6.
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Array new: 6
=&gt; #(nil nil nil nil nil nil)
</code></pre>
</div>

<p>
Slanjem poruke klasi izvšava se metoda klase (<i>class method</i>).
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Tamagoshi withHunger: 10
</code></pre>
</div>

</section>
<section id="slide-2-16">
<h3 id="2-16"><span class="section-number-3">2.16</span> Less is more!</h3>
<ul>
<li>Bez konstruktora</li>
<li>Bez statičkih metoda</li>
<li>Bez deklaracije tipova</li>
<li>Bez interfejsa</li>
<li>Bez <i>package/private/protected</i> modifikatora</li>
<li>Bez parametrizovanih tipova</li>
<li>Bez boxing-a</li>
<li>Ali i dalje vrlo moćan jezik!</li>

</ul>

</section>
<section id="slide-2-17">
<h3 id="2-17"><span class="section-number-3">2.17</span> Hello world</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >'Hello World' asMorph openInWindow
</code></pre>
</div>

<p>
Šaljemo poruku <code>asMorph</code> stringu <code>Hello World</code> i dobijamo grafički element
(<i>Morph</i>). Dobijenom grafičkom elementu šaljemo poruku <code>openInWindow</code> da bi ga
prikazali u prozoru.
</p>

</section>
<section id="slide-2-18">
<h3 id="2-18"><span class="section-number-3">2.18</span> Primer - preuzimanje slike sa web-a</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >(ZnEasy getPng: 'http://pharo.org/web/files/pharo.png') asMorph openInWindow
</code></pre>
</div>

<ul>
<li><code>ZnEasy</code> je ime klase. Klase su globalno dostupe i nazivi počinju sa velikim
slovom.</li>
<li><code>getPng:</code> je poruka koju šaljemo klasi <code>ZnEasy</code>. Ova poruka ima argument. U
ovom slučaju to je string <code>'http://pharo.org/web/files/pharo.png'</code>
<ul>
<li>Poruke koje imaju argumente se pišu sa <code>:</code> na kraju naziva i mogu biti
višesložne. Ovakve poruke nazivamo <code>keyword message</code>.</li>

</ul></li>

<li>Poruka <code>asMorph</code> šalje se objektu koji vraća poruka <code>getPng:</code>. Ovo je obična
unarna poruka bez argumenata.</li>

<li>Poruka <code>openInWindow</code> se šalje objektu koji vraća poruka <code>asMorph</code>.</li>

<li>Ove dve unarne poruke se primenjuju s leva na desno.</li>

</ul>

</section>
<section id="slide-2-19">
<h3 id="2-19"><span class="section-number-3">2.19</span> Sintaksni elementi jezika</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Vrsta</th>
<th scope="col" class="org-left">Primer</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Komentar</td>
<td class="org-left"><code>"Ovo je komentar"</code></td>
</tr>

<tr>
<td class="org-left">Karakteri</td>
<td class="org-left"><code>$c</code> <code>$#</code> <code>$@</code></td>
</tr>

<tr>
<td class="org-left">String</td>
<td class="org-left"><code>'Ovo je string'</code></td>
</tr>

<tr>
<td class="org-left">Simbol (jedinstveni string)</td>
<td class="org-left"><code>#prvi</code> <code>#+</code></td>
</tr>

<tr>
<td class="org-left">Literal niz</td>
<td class="org-left"><code>#(23 56 89)</code></td>
</tr>

<tr>
<td class="org-left">Integer</td>
<td class="org-left"><code>45</code>, <code>2r10100</code></td>
</tr>

<tr>
<td class="org-left">Real</td>
<td class="org-left"><code>1.5</code>, <code>6.03e-34</code>, <code>4</code>, <code>2.4e7</code></td>
</tr>
</tbody>
</table>

</section>
<section id="slide-2-20">
<h3 id="2-20"><span class="section-number-3">2.20</span> Sintaksni elementi jezika</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Vrsta</th>
<th scope="col" class="org-left">Primer</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Boolean</td>
<td class="org-left"><code>true</code>, <code>false</code></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">(instanca <code>True</code> i <code>False</code>)</td>
</tr>

<tr>
<td class="org-left">Undefined</td>
<td class="org-left"><code>nil</code> (instanca <code>UndefinedObject</code> )</td>
</tr>

<tr>
<td class="org-left">Point</td>
<td class="org-left"><code>10@120</code></td>
</tr>
</tbody>
</table>

</section>
<section id="slide-2-21">
<h3 id="2-21"><span class="section-number-3">2.21</span> Osnovne jezičke konstrukcije</h3>
<ul>
<li>Deklaracija privremene varijable: <code>| var |</code></li>
<li>Dodela vrednosti varijabli: <code>var := aValue</code></li>
<li>Separator iskaza: <code>obj1 message1. obj2 message2.</code></li>
<li>Povratak vrednosti iz metode: <code>^ aValue</code></li>
<li>Blokovi (leksička zatvorenja ili anonimne metode)</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >[ :x | x + 2 ] value: 5
=&gt; 7
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-3">
<h2 id="3"><span class="section-number-2">3</span> Poruke</h2>
<div class="outline-text-2" id="text-3">
</div>
</section>
<section id="slide-3-1">
<h3 id="3-1"><span class="section-number-3">3.1</span> Tri vrste poruka</h3>
<ol>
<li><p>
Unarne poruke:
</p>
<ul>
<li>Sintaksa: <code>receiver selector</code></li>
<li>Primeri:</li>

</ul>
<div class="org-src-container">

<pre><code class=" smalltalk" >9 squared
Date today
</code></pre>
</div></li>

<li><p>
Binarne poruke:
</p>
<ul>
<li>Sintaksa: <code>receiver selector argument</code></li>
<li>Primeri:</li>

</ul>
<div class="org-src-container">

<pre><code class=" smalltalk" >2 + 3
3 @ 4
</code></pre>
</div></li>

<li><p>
<i>Keyword</i> poruke:
</p>
<ul>
<li>Sintaksa: <code>receiver key1: arg1 key2: arg2</code></li>
<li>Primeri:</li>

</ul>
<div class="org-src-container">

<pre><code class=" smalltalk" >2 between: 10 and: 20
5 to: 10 do: [ :i | Transcript show: i ]
</code></pre>
</div></li>

</ol>

</section>
<section id="slide-3-2">
<h3 id="3-2"><span class="section-number-3">3.2</span> Prioriteti poruka</h3>
<div class="org-src-container">

<pre><code class=" python" >(Msg) &gt; Unary &gt; Binary &gt; Keywords
</code></pre>
</div>

<p>
Ova pravila redukuju potrebu za navođenjem zagrada.
</p>

</section>
<section id="slide-3-3">
<h3 id="3-3"><span class="section-number-3">3.3</span> Slanje unarne poruke</h3>
<pre  class="example">
receiver selector
</pre>

<p>
Primer:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >10000 factorial
</code></pre>
</div>


<p>
Šaljemo poruku <code>factorial</code> objektu <code>10000</code>.
</p>

</section>
<section id="slide-3-4">
<h3 id="3-4"><span class="section-number-3">3.4</span> Slanje binarne poruke</h3>
<pre  class="example">
receiver selector argument
</pre>

<p>
Primer:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >1 + 3
</code></pre>
</div>

<p>
Šaljemo poruku <code>+</code> objektu <code>1</code> sa parametrom <code>3</code>.
</p>

</section>
<section id="slide-3-5">
<h3 id="3-5"><span class="section-number-3">3.5</span> Slanje <i>keyword</i> poruke</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >receiver keyword1: arg1 keyword2: arg2
</code></pre>
</div>

<p>
Ekvivalentno u Javi ili C-like jezicima:
</p>

<div class="org-src-container">

<pre><code class=" java" >receiver.keyword1keyword2(arg1, arg2)
</code></pre>
</div>

</section>
<section id="slide-3-6">
<h3 id="3-6"><span class="section-number-3">3.6</span> <i>Keyword</i> poruke za Java programere</h3>
<p>
U Javi
</p>

<div class="org-src-container">

<pre><code class=" java" >postman.send(mail, recipient);
</code></pre>
</div>

<pre  class="fragment roll-in">
postman . send ( mail , recipient );
</pre>

<pre  class="fragment roll-in">
postman send mail recipient
</pre>

<pre  class="fragment roll-in">
postman send mail to recipient
</pre>

<p class="fragment roll-in">
U Pharo/Smalltalk-u
</p>

<div class="org-src-container">

<pre class="fragment roll-in"><code class=" smalltalk" >postman send: mail to: recipient
</code></pre>
</div>

</section>
<section id="slide-3-7">
<h3 id="3-7"><span class="section-number-3">3.7</span> Primer: slanje HTTP zahteva</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >ZnClient new
  url: 'https://en.wikipedia.org/w/index.php';
  queryAt:'title' put:'Pharo';
  queryAt:'action' put:'edit';
  get
</code></pre>
</div>

<ul>
<li><code>new</code> je unarna poruka koja se šalje klasi <code>ZnClient</code></li>
<li><code>queryAt:put:</code> je <i>keyword</i> poruka sa dva argumenta</li>
<li><code>get</code> je unarna poruka</li>
<li><code>;</code> je specijalan operator koji zovemo kaskada (<i>cascade</i>) - šaljemo poruku
istom objektu primaocu.</li>

</ul>

</section>
<section id="slide-3-8">
<h3 id="3-8"><span class="section-number-3">3.8</span> Poruke su svuda</h3>
<ul>
<li>Uslovi</li>
<li>Petlje</li>
<li>Iteracije</li>
<li>Konkurencija</li>
<li>&#x2026;</li>

</ul>

</section>
<section id="slide-3-9">
<h3 id="3-9"><span class="section-number-3">3.9</span> Primer - <code>Integer&gt;&gt;factorial</code></h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >factorial
	"Answer the factorial of the receiver."

	self = 0 ifTrue: [^ 1].
	self &gt; 0 ifTrue: [^ self * (self - 1) factorial].
	self error: 'Not valid for negative integers'
</code></pre>
</div>

<ul>
<li><code>ifTrue:</code> je poruka koja se šalje <code>Boolean</code> objektu koji vraća poruka <code>=</code>
poslata objektu <code>self</code> sa parametrom <code>0</code>.</li>
<li>Postoje i <code>ifTrue:ifFalse:</code>, <code>ifFalse:ifTrue:</code> i <code>ifFalse:</code></li>
<li>Implementirane su u klasama <code>True</code> i <code>False</code> i možete ih pročitati. Ne postoji
ništa specijalno u vezi ovih poruka!</li>

</ul>

</section>
<section id="slide-3-10">
<h3 id="3-10"><span class="section-number-3">3.10</span> Kompozicija poruka - s leva na desno</h3>
<p>
Šta se dešava kada imamo sukcesivne poruke istog tipa?
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >1000 factorial class name
&gt; 'LargePositiveInteger'
</code></pre>
</div>

<p>
ekvivalentno je sa:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >(((1000 factorial) class) name)
</code></pre>
</div>

</section>
<section id="slide-3-11">
<h3 id="3-11"><span class="section-number-3">3.11</span> Prioritet primeri</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >(Msg) &gt; unarne &gt; binarne &gt; keyword
</code></pre>
</div>

<div class="org-src-container">

<pre><code class=" smalltalk" >2 + 3 squared
&gt; 2 + 9
&gt; 11
</code></pre>
</div>

<ul>
<li>Prvo unarna <code>squared</code></li>
<li>Zatim binarna <code>+</code></li>

</ul>

</section>
<section id="slide-3-12">
<h3 id="3-12"><span class="section-number-3">3.12</span> Prioritet primeri</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >2 raisedTo: 3 + 2
&gt; 2 raisedTo: 5
&gt; 32
</code></pre>
</div>

<ul>
<li>Prvo binarna <code>+</code></li>
<li>Zatim <i>keyword</i> <code>raisedTo:</code></li>

</ul>

</section>
<section id="slide-3-13">
<h3 id="3-13"><span class="section-number-3">3.13</span> Prioritet primeri</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >Color gray - Color white = Color black
&gt; aGray - aWhite = aBlack
&gt; aBlack = aBlack
&gt; true
</code></pre>
</div>

<ul>
<li>Prvo unarne</li>
<li>Zatim binarne s leva na desno: <code>-</code> pa onda <code>=</code></li>

</ul>

</section>
<section id="slide-3-14">
<h3 id="3-14"><span class="section-number-3">3.14</span> Prioritet primeri</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >1 class maxVal + 1
&gt; 1073741824
</code></pre>
</div>

<ul>
<li>unarna <code>class</code>, unarna <code>maxVal</code>, binarna <code>+</code></li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >1 class
&gt; SmallInteger

1 class maxVal
&gt; 1073741823

1 class maxVal + 1
&gt; 1073741824

(1 class maxVal + 1) class
&gt; LargePositiveInteger
</code></pre>
</div>

</section>
<section id="slide-3-15">
<h3 id="3-15"><span class="section-number-3">3.15</span> Upotreba zagrada kod prioriteta</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >0@0 extent: 100@100 bottomRight
&gt; Message not understood
&gt; 100 does not understand bottomRight
</code></pre>
</div>

<p>
Moramo koristiti zagrade:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >(0@0 extent: 100@100) bottomRight
&gt; (aPoint extent: anotherPoint) bottomRight
&gt; aRectangle bottomRight
&gt; 100@100
</code></pre>
</div>

</section>
<section id="slide-3-16">
<h3 id="3-16"><span class="section-number-3">3.16</span> Cena jednostavnosti/uniformnosti</h3>
<p>
Samo poruke:
</p>

<ul>
<li><code>+</code>
<ul>
<li>je poruka (nije operacija), ne postoji specijalno definisani prioritet</li>
<li>možemo je redefinisati za različite domene</li>

</ul></li>
<li>Jednostavnost</li>
<li>Ograničenje: nemamo definisan matematički prioritet operacija</li>

</ul>

</section>
<section id="slide-3-17">
<h3 id="3-17"><span class="section-number-3">3.17</span> Nema prioriteta aritmetičkih operacija</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >3 + 2 * 10
&gt; 5 * 10
&gt; 50
</code></pre>
</div>

<p>
Moramo pisati sa zagradama:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >3 + (2 * 10)
&gt; 3 + 20
&gt; 23
</code></pre>
</div>

</section>
<section id="slide-3-18">
<h3 id="3-18"><span class="section-number-3">3.18</span> Nema prioriteta aritmetičkih operacija</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >1/3 + 2/3
&gt; 7/3 /3
&gt; 7/9
</code></pre>
</div>

<p>
Moramo pisati:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >(1/3) + (2/3)
&gt;1
</code></pre>
</div>

</section>
<section id="slide-3-19">
<h3 id="3-19"><span class="section-number-3">3.19</span> Sekvenca izraza</h3>
<p>
<code>.</code> je separator:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >expression1.
expression2.
expression3
</code></pre>
</div>

<p>
Primer:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Transcript cr.
Transcript show: 1.
Transcript show: 2
</code></pre>
</div>

</section>
<section id="slide-3-20">
<h3 id="3-20"><span class="section-number-3">3.20</span> Sekvenca izraza</h3>
<ul>
<li><code>.</code> je separator a ne terminacija.</li>
<li>Nema potrebe da se stavlja na kraju niza izraza.</li>
<li>Ne stavlja se posle deklaracije privremenih promenjivih.</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >| macNode pcNode |
macNode := Workstation withName: #mac.
macNode sendPacket: 'Hello World'
</code></pre>
</div>

</section>
<section id="slide-3-21">
<h3 id="3-21"><span class="section-number-3">3.21</span> Slanje više poruka istom objektu - kaskada (<code>;</code>)</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >|c|
c := OrderedCollection new.
c add: 1.
c add: 2
</code></pre>
</div>

<p>
Ekvivalentno je sa:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >OrderedCollection new
   add: 1;
   add: 2
</code></pre>
</div>

<ul>
<li><code>add: 2</code> se šaljem istom prijemniku poruke <code>add: 1</code> a to je objekat vraćen
porukom <code>new</code>.</li>

</ul>

</section>
</section>
<section>
<section id="slide-4">
<h2 id="4"><span class="section-number-2">4</span> Blokovi</h2>
<div class="outline-text-2" id="text-4">
</div>
</section>
<section id="slide-4-1">
<h3 id="4-1"><span class="section-number-3">4.1</span> Blokovi izgledaju kao funkcije</h3>
<p>
fct(x) = x*x + 3
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >fct := [ :x | x * x + 3 ]
</code></pre>
</div>

<p>
fct(2)
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >fct value: 2
</code></pre>
</div>

</section>
<section id="slide-4-2">
<h3 id="4-2"><span class="section-number-3">4.2</span> Blokovi</h3>
<ul>
<li>Anonimne metode</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >[ :each | Transcript show: each abs printString; cr ]
</code></pre>
</div>

<ul>
<li>Leksička "zatvorenja" (<i>closures</i>)</li>
<li>Takođe su objekti:
<ul>
<li>Mogu se proslediti kao argumenti poruka</li>
<li>Mogu se dodeliti varijablama</li>
<li>Mogu biti povratne vrednosti metoda</li>

</ul></li>

</ul>

</section>
<section id="slide-4-3">
<h3 id="4-3"><span class="section-number-3">4.3</span> Upotreba blokova</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >#(1 2 -4 -86) do: [ :each | Transcript show: each abs printString; cr ]
&gt; 1
&gt; 2
&gt; 4
&gt; 86
</code></pre>
</div>

<ul>
<li>Pišu se unutar <code>[]</code></li>
<li>Mogu imati parametre - navode se kao simboli pre <code>|</code> (<code>:each</code>)</li>
<li>U ovom primeru blok se evaluira za svaki element niza. <code>:each</code> dobija redom
vrednosti niza.</li>
<li><code>value:</code> poruka se koristi za evaluaciju bloka.</li>

</ul>

</section>
<section id="slide-4-4">
<h3 id="4-4"><span class="section-number-3">4.4</span> Definicija bloka ne izvršava kod</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >(1/0)
-&gt; Greška
</code></pre>
</div>

<p>
Ali nema greške pri definiciji bloka:
</p>
<ul>
<li>Definicija bloka ne izvršava kod</li>
<li>Definicija bloka "zamrzava" izračunavanje definisano telom bloka.</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >[1/0]
&gt; [1/0]

[1/0].
1 + 2
&gt; 3
</code></pre>
</div>

</section>
<section id="slide-4-5">
<h3 id="4-5"><span class="section-number-3">4.5</span> Izvršavanje blokova</h3>
<p>
Obavlja se eksplicitno slanjem poruke <code>value</code>.
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >[2 + 6] value
&gt; 8

[1/0] value
&gt; Error
</code></pre>
</div>

</section>
<section id="slide-4-6">
<h3 id="4-6"><span class="section-number-3">4.6</span> Blok sa jednim argumentom</h3>
<p>
Blokovi mogu imati argumente (kao i metode):
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >[ :x | x + 2 ]
</code></pre>
</div>

<ul>
<li><code>:x</code> predstavlja argument bloka</li>
<li><code>x + 2</code> je telo bloka</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >[ :x | x + 2 ] value: 5
&gt; 7
</code></pre>
</div>

<ul>
<li>Poruka <code>value:</code> izvršava blok sa parametrom <code>5</code>.
<ul>
<li><code>x</code> dobija vrednost <code>5</code> za vreme izvršavanja bloka.</li>

</ul></li>

</ul>

</section>
<section id="slide-4-7">
<h3 id="4-7"><span class="section-number-3">4.7</span> Vrednost evaluacije bloka</h3>
<p>
Evaluacija bloka vraća vrednost poslednjeg izraza u bloku:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >[:x|
 x + 33.
 x + 2] value: 5
&gt; 7
</code></pre>
</div>

</section>
<section id="slide-4-8">
<h3 id="4-8"><span class="section-number-3">4.8</span> Blokovi se mogu sačuvati</h3>
<ul>
<li>Blok se može sačuvati kao vrednost varijable</li>
<li>Blok se može evaluirati više puta</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >| add2 |
add2 := [ :x | x + 2 ].
add2 value: 5.
&gt;7

add2 value: 33
&gt; 35
</code></pre>
</div>

</section>
<section id="slide-4-9">
<h3 id="4-9"><span class="section-number-3">4.9</span> Blokovi mogu imati više argumenata</h3>
<p>
Primer:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >[ :x :y | x + y ]
</code></pre>
</div>

<p>
<code>:x :y</code> su argumenti bloka.
</p>

<p>
Kako se izvršava blok sa dva argumenta?
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >[ :x :y | x + y ] ??? 5 7
&gt; 12
</code></pre>
</div>

<div class="org-src-container">

<pre class="fragment (t)"><code class=" smalltalk" >[ :x :y | x + y ] value: 5 value: 7
&gt; 12
</code></pre>
</div>

<ul>
<li class="fragment roll-in"><code>value:value:</code> je poruka sa dva argumenta koja se šalje bloku sa parametrima
<code>5</code> i <code>7</code></li>

</ul>

</section>
<section id="slide-4-10">
<h3 id="4-10"><span class="section-number-3">4.10</span> Blokovi sa privremenim varijablama</h3>
<p>
Blokovi mogu definisati lokalne privremene varijable (kao i metode):
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Collection&gt;&gt;affect: anObject when: aBoolean
  self do: [ :index | | args |
            args := ....
            aBoolean
            ifTrue: [ anObject do: args ]
            ifFalse: [ anObject doDifferently: args ] ].

</code></pre>
</div>

<ul>
<li><code>| args |</code> definiše privremenu varijablu <code>args</code></li>
<li><code>args</code> postoji samo za vreme izvršavanja bloka</li>

</ul>

</section>
<section id="slide-4-11">
<h3 id="4-11"><span class="section-number-3">4.11</span> Povratak iz bloka izaziva povratak iz metode</h3>
<p>
Kada se <code>^</code> izvrši unutar bloka dolazi do povratka iz metode u kojoj je blok
definisan:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Integer&gt;&gt;factorial
  "Answer the factorial of the receiver."

  self = 0 ifTrue: [ ^ 1 ].
  self &gt; 0 ifTrue: [ ^ self * (self − 1) factorial ].
  self error: 'Not valid for negative integers'
</code></pre>
</div>

<div class="org-src-container">

<pre><code class=" smalltalk" >0 factorial
&gt;1

42 factorial
&gt;1405006117752879898543142606244511569936384000000000
</code></pre>
</div>

</section>
<section id="slide-4-12">
<h3 id="4-12"><span class="section-number-3">4.12</span> Dizajn saveti za upotrebu blokova</h3>
<ul>
<li>Koristi blokove sa najviše 2 ili 3 parametra</li>
<li>Definisati klasu umesto bloka za više parametara</li>

</ul>

</section>
</section>
<section>
<section id="slide-5">
<h2 id="5"><span class="section-number-2">5</span> Petlje i iteracije</h2>
<div class="outline-text-2" id="text-5">
</div>
</section>
<section id="slide-5-1">
<h3 id="5-1"><span class="section-number-3">5.1</span> Petlje su takođe implementirane kao poruke</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >1 to: 4 do: [ :i | Transcript &lt;&lt; i ]
&gt; 1
&gt; 2
&gt; 3
&gt; 4
</code></pre>
</div>

<ul>
<li><code>to:do:</code> je poruka poslata broju (instanci <code>Integer</code> klase)</li>

</ul>

</section>
<section id="slide-5-2">
<h3 id="5-2"><span class="section-number-3">5.2</span> Petlje su takođe implementirane kao poruke</h3>
<ul>
<li>Mnoge druge vrste petlji: <code>timesRepeat:</code>, <code>to:by:do:</code>, <code>whileTrue:</code>,
<code>whileFalse:</code>&#x2026;</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >4 timesRepeat: [self doSomething ]

0 to: 100 by: 3 do: [ :i | ... ]
</code></pre>
</div>

<ul>
<li>Možete lako napraviti novu vrstu petlje koja se neće razlikovati od sistemske.</li>

</ul>

</section>
<section id="slide-5-3">
<h3 id="5-3"><span class="section-number-3">5.3</span> <code>whileTrue:</code></h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >[ ... ] whileTrue: [ ... ]
</code></pre>
</div>

<p>
Izvršava argument dok god je vrednost prijemnika <code>true</code>
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Color &gt;&gt; atLeastAsLuminentAs: aFloat
  | revisedColor |
  revisedColor := self.
  [ revisedColor luminance &lt; aFloat ]
    whileTrue: [ revisedColor := revisedColor slightlyLighter ].
  ^ revisedColor
</code></pre>
</div>

</section>
<section id="slide-5-4">
<h3 id="5-4"><span class="section-number-3">5.4</span> <code>whileTrue</code></h3>
<p>
Izvršava blok prijemnik sve dok je vrednost <code>true</code>:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >[ ... ] whileTrue

</code></pre>
</div>

<p>
Analogno, postoje i <code>whileFalse</code> i <code>whileFalse:</code>
</p>

</section>
<section id="slide-5-5">
<h3 id="5-5"><span class="section-number-3">5.5</span> Iteracije</h3>
<p>
Implementirane kao poruke.
</p>

<p>
Pitamo kolekciju da uradi iteraciju svojih elemenata:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >#(1 2 -4 -86) do: [ :each | Transcript show: each abs printString; cr ]
&gt; 1
&gt; 2
&gt; 4
&gt; 86
</code></pre>
</div>

</section>
<section id="slide-5-6">
<h3 id="5-6"><span class="section-number-3">5.6</span> Osnovne iteracije definisane nad kolekcijama</h3>
<ul>
<li><code>do:</code> - iteracija</li>
<li><code>collect:</code> - iteracija i mapiranje elemenata</li>
<li><code>select:</code> - selekcija elemenata na osnovu predikata</li>
<li><code>reject:</code> - eliminacija elemenata na osnovu predikata</li>
<li><code>detect:</code> - vraća prvi koji zadovoljava uslov</li>
<li><code>detect:ifNone:</code> - vraća prvi koji zadovoljava uslov ili podrazumevanu
vrednost ukoliko takvog nema u kolekciji</li>
<li><code>includes:</code> - test da li elemenat pripada kolekciji</li>
<li>&#x2026; mnogi drugi</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >#(2 3 7) collect: [ :each | each raisedTo: 2 ]
&gt; #(4 9 49)

#(2 9 7) detect: [ :i | (i \\ 3) = 0 ]
&gt; 9
</code></pre>
</div>

</section>
<section id="slide-5-7">
<h3 id="5-7"><span class="section-number-3">5.7</span> Interesantni primeri</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >3 timesRepeat: [ Transcript show: 'Hello' ; cr ].

Date now + 12 days.

Point linesOfCode.

Smalltalk allClasses size.

Smalltalk allClasses inject: 0 into: [ :sum :each | sum + each linesOfCode ].

VGTigerDemo runDemo.

SystemNavigation new browseAllSelect:
       [:m| m primitive isZero and: [m pragmas notEmpty]].
</code></pre>
</div>

<ul>
<li>World - inspect (GTInspector settings, step update/refresh)</li>

</ul>

</section>
</section>
<section>
<section id="slide-6">
<h2 id="6"><span class="section-number-2">6</span> Bulovi izrazi i uslovi</h2>
<div class="outline-text-2" id="text-6">
</div>
</section>
<section id="slide-6-1">
<h3 id="6-1"><span class="section-number-3">6.1</span> Bulovi izrazi</h3>
<ul>
<li><code>true</code> je jedinstvena instanca klase <code>True</code></li>
<li><code>false</code> je jedinstvena instanca klase <code>False</code></li>
<li>Klase <code>True</code> i <code>False</code> nasleđuju klasu <code>Boolean</code></li>

</ul>

<p>
U Pharo Bulovi izrazi nisu ništa specijalno:
</p>
<ul>
<li><code>&amp; | not</code></li>
<li><code>or:</code> <code>and:</code> - lazy</li>
<li><code>xor:</code></li>
<li><code>ifTrue:ifFalse:</code></li>
<li><code>ifFalse:ifTrue:</code></li>
<li>&#x2026;</li>

</ul>

</section>
<section id="slide-6-2">
<h3 id="6-2"><span class="section-number-3">6.2</span> <i>Eager</i> i <i>lazy</i> evaluacija izraza</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >false &amp; (1 error: 'crazy')
−&gt; an error
</code></pre>
</div>

<p>
Argument <code>(1 error: 'crazy')</code> se evaluira jer ova operacija ne koristi "lenju
evaluaciju" (<i>lazy</i>).
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >false and: [ 1 error: 'crazy' ]
−&gt; false "no error!"
</code></pre>
</div>

<p>
Argument <code>[ 1 error: 'crazy' ]</code> se ne evaluira jer nije neophodno za određivanje
vrednosti izraza - koristi se "lenja evaluacija".
</p>

</section>
<section id="slide-6-3">
<h3 id="6-3"><span class="section-number-3">6.3</span> Uslovi</h3>
<p>
U Pharo uslovi su poruke koje se šalju Bulovim vrednostima i blokovima.
</p>

</section>
<section id="slide-6-4">
<h3 id="6-4"><span class="section-number-3">6.4</span> <code>ifTrue:ifFalse</code> je poruka</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >Weather isRaining
  ifTrue: [ self takeMyUmbrella ]
  ifFalse: [ self takeMySunglasses ]
</code></pre>
</div>

<ul>
<li>Konceptualno <code>ifTrue:ifFalse</code> je poruka koja se šalje objektu koji ima Bulovu
vrednost (ili je <code>true</code> ili je <code>false</code>).</li>
<li>Optimizovano od strane kompajlera.</li>

</ul>

</section>
<section id="slide-6-5">
<h3 id="6-5"><span class="section-number-3">6.5</span> <code>ifTrue</code> i <code>ifTrue:ifFalse:</code></h3>
<p>
<code>ifTrue: []</code> i <code>ifTrue: [] ifFalse: []</code> su različite poruke.
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >LogicalFont&gt;&gt;forceItalicOrOblique
  self slantValue = 0
  ifTrue: [ slantValue := 1 ]
</code></pre>
</div>

<p>
Analogno, <code>ifFalse:[]</code> i <code>ifFalse: [] ifTrue: []</code> su različite poruke.
</p>

</section>
<section id="slide-6-6">
<h3 id="6-6"><span class="section-number-3">6.6</span> Uslovi: <code>ifEmpty</code> i <code>ifNotEmpty:</code></h3>
<p>
Implementirano za kolekcije.
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >myProtocol
  ifEmpty: [ 'As yet unclassified' ]
&gt; 'As yet unclassified' ili myProtocol

Implementacija:
Collection&gt;&gt;ifEmpty: aBlock
	^ self isEmpty 
		ifTrue: [ ^aBlock value ]
		ifFalse: [ self ]
</code></pre>
</div>

<div class="org-src-container">

<pre><code class=" smalltalk" >self listItems
  ifNotEmpty: [ :aList | aList at: index ]
&gt; element liste na indeksu "index" ili sama lista ukoliko je prazna

Implementacija:
Collection&gt;&gt;ifNotEmpty: aBlock
    ^self isEmpty
          ifTrue: [self]
          ifFalse: [aBlock cull: self] 
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-7">
<h2 id="7"><span class="section-number-2">7</span> Klase i metode</h2>
<div class="outline-text-2" id="text-7">
</div>
</section>
<section id="slide-7-1">
<h3 id="7-1"><span class="section-number-3">7.1</span> System Browser</h3>

<div class="figure">
<p><img src="./slike/browser.png" alt="browser.png" />
</p>
</div>

</section>
<section id="slide-7-2">
<h3 id="7-2"><span class="section-number-3">7.2</span> Kreiranje klase</h3>

<div class="figure">
<p><img src="./slike/point_class.png" alt="point_class.png" />
</p>
</div>

</section>
<section id="slide-7-3">
<h3 id="7-3"><span class="section-number-3">7.3</span> Kreiranje klase</h3>
<p>
Slanje poruke nadklasi
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Object subclass: #Point
  instanceVariableNames: 'x y'
  classVariableNames: ''
  package: 'Kernel-BasicObjects'
</code></pre>
</div>

</section>
<section id="slide-7-4">
<h3 id="7-4"><span class="section-number-3">7.4</span> Definicija metoda</h3>
<ul>
<li>Metode su javne (<i>public</i>)</li>
<li>Metode su virtualne (tj. pronalaze se u vreme izvršavanja)</li>
<li>Podrazumevano vraćaju <code>self</code></li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >messageSelectorAndArgumentNames
  "comment stating purpose of message"
  
  | temporary variable names |
  statements
</code></pre>
</div>

</section>
<section id="slide-7-5">
<h3 id="7-5"><span class="section-number-3">7.5</span> Primer definicije metode</h3>

<div class="figure">
<p><img src="./slike/method_definition.png" alt="method_definition.png" />
</p>
</div>

</section>
<section id="slide-7-6">
<h3 id="7-6"><span class="section-number-3">7.6</span> Metoda podrazumevano vraća <code>self</code></h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >Game &gt;&gt; initializePlayers
  self players
  at: 'tileAction'
  put: ( MITileAction director: self )
</code></pre>
</div>

<p>
je ekvivalentno sa:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Game &gt;&gt; initializePlayers
  self players
  at: 'tileAction'
  put: ( MITileAction director: self ).
  ^ self "&lt;−− optional"
</code></pre>
</div>

</section>
<section id="slide-7-7">
<h3 id="7-7"><span class="section-number-3">7.7</span> Metode klase</h3>

<div class="figure">
<p><img src="./slike/class_methods.png" alt="class_methods.png" width="60%" />
</p>
</div>

<ul>
<li>Dugme <code>Class</code> služi za pregled i definiciju metoda klase.</li>
<li>Metode na nivou klase. Odgovor na poruke koje se šalju klasi.</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >Point class &gt;&gt; x: xInteger y: yInteger
  "Answer an instance of me with coordinates xInteger and yInteger."

  ^ self basicNew setX: xInteger setY: yInteger
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-8">
<h2 id="8"><span class="section-number-2">8</span> yourself</h2>
<div class="outline-text-2" id="text-8">
</div>
</section>
<section id="slide-8-1">
<h3 id="8-1"><span class="section-number-3">8.1</span> Problem</h3>
<p>
Dodajemo 2 u skup:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Set new add: 2
&gt;2
</code></pre>
</div>

<p>
Rezultat izraza je 2 a ne skup!
</p>

</section>
<section id="slide-8-2">
<h3 id="8-2"><span class="section-number-3">8.2</span> Zašto?</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >Set&gt;&gt;add: newObject
  "Include newObject as one of the receiver's elements, but
  only if not already present. Answer newObject."
  [...]
  ^ newObject
</code></pre>
</div>

<ul>
<li>Metod <code>add:</code> vraća argument a ne objekat</li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >Set new add: 2
&gt;2
</code></pre>
</div>

</section>
<section id="slide-8-3">
<h3 id="8-3"><span class="section-number-3">8.3</span> Moguće rešenje</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >|s|
s := Set new.
s add: 2.
s
</code></pre>
</div>

</section>
<section id="slide-8-4">
<h3 id="8-4"><span class="section-number-3">8.4</span> Kraće rešenje - <code>yourself</code></h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >Object &gt;&gt; yourself
^ self
</code></pre>
</div>

<div class="org-src-container">

<pre><code class=" smalltalk" >Set new
  add: 2;
  yourself
&gt; aSet
</code></pre>
</div>

<ul>
<li>Poruke <code>add:</code> i <code>yourself</code> se šalju skupu</li>
<li>kaskada <code>;</code> vraća objekat koji vraća poruka <code>yourself</code> - u našem slučaju skup.</li>

</ul>

</section>
<section id="slide-8-5">
<h3 id="8-5"><span class="section-number-3">8.5</span> Česta greška</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >Counter class &gt;&gt; withValue: anInteger
  self new
  value: anInteger;
  yourself
</code></pre>
</div>

<ul>
<li><code>Counter withValue: 10</code> vraća <code>Counter</code> klasu umesto njenu instancu.</li>

</ul>

</section>
<section id="slide-8-6">
<h3 id="8-6"><span class="section-number-3">8.6</span> Zašto?</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >Counter class &gt;&gt; withValue: anInteger
  self new
  value: anInteger;
  yourself
</code></pre>
</div>

<p>
je ekvivalentno sa:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >Counter class &gt;&gt; withValue: anInteger
  self new
  value: anInteger;
  yourself.
  ^self
</code></pre>
</div>

<p>
Gde je <code>self</code> prijemnik poruke <code>withValue:</code> tj. klasa <code>Counter</code>.
</p>

</section>
<section id="slide-8-7">
<h3 id="8-7"><span class="section-number-3">8.7</span> Rešenje</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >Counter class &gt;&gt; withValue: anInteger
  ^self new
  value: anInteger;
  yourself
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-9">
<h2 id="9"><span class="section-number-2">9</span> Nasleđivanje i pretraga metoda (<i>Method Lookup</i>)</h2>
<div class="outline-text-2" id="text-9">
</div>
</section>
<section id="slide-9-1">
<h3 id="9-1"><span class="section-number-3">9.1</span> Osnove</h3>
<div class="column" style="float:left; width: 70%">
<p>
Podklasa:
</p>
<ul>
<li>Može da doda stanje i ponašanje</li>
<li>Može da koristi stanje i ponašanje nadklase</li>
<li>Može da izvrši specijalizaciju i redefiniciju ponašanja nadklase</li>

</ul>
</div>

<div class="column" style="float:right; width: 30%">

<div class="figure">
<p><img src="./slike/inheritance.png" alt="inheritance.png" />
</p>
</div>
</div>

</section>
<section id="slide-9-2">
<h3 id="9-2"><span class="section-number-3">9.2</span> Koren hijerarhije nasleđivanja</h3>
<div class="column" style="float:left; width: 70%">
<ul>
<li>Možemo smatrati da je klasa <code>Object</code> korenska klasa svake klase.</li>
<li>Postoji i klasa <code>ProtoObject</code> ali je njena upotreba specijalna pa je nećemo
razmatrati.</li>

</ul>
</div>

<div class="column" style="float:right; width: 30%">

<div class="figure">
<p><img src="./slike/hierarchy.png" alt="hierarchy.png" />
</p>
</div>
</div>

</section>
<section id="slide-9-3">
<h3 id="9-3"><span class="section-number-3">9.3</span> Osnove nasleđivanja</h3>
<p>
Nasleđivanje je:
</p>
<ul>
<li>Statičko za stanje (u vreme definisanja klase).</li>
<li>Dinamičko za ponašanje (u vreme izvršavanja).</li>

</ul>

</section>
<section id="slide-9-4">
<h3 id="9-4"><span class="section-number-3">9.4</span> Nasleđivanje varijabli instanci klasa</h3>
<div class="column" style="float:left; width: 70%">
<ul>
<li>Dešava se za vreme definicije klase.</li>
<li>Izračunava se na osnovu:
<ul>
<li>Varijabli posmatrane klase.</li>
<li>Varijabli svih nadklasa.</li>

</ul></li>

</ul>
</div>

<div class="column" style="float:right; width: 30%">

<div class="figure">
<p><img src="./slike/inheritance.png" alt="inheritance.png" />
</p>
</div>
</div>

</section>
<section id="slide-9-5">
<h3 id="9-5"><span class="section-number-3">9.5</span> Nasleđivanje ponašanja</h3>
<div class="column" style="float:left; width: 70%">
<ul>
<li>Dešava se u vreme izvršavanja</li>
<li>Metoda se traži:
<ul>
<li>Počevši od klase objekta prijemnika</li>
<li>Zatim u svim nadklasama uz lanac nasleđivanja.</li>

</ul></li>

</ul>
</div>

<div class="column" style="float:right; width: 30%">

<div class="figure">
<p><img src="./slike/method_lookup.png" alt="method_lookup.png" />
</p>
</div>
</div>

</section>
<section id="slide-9-6">
<h3 id="9-6"><span class="section-number-3">9.6</span> Slanje i obrada poruka</h3>
<div class="column" style="float:left; width: 50%">
<p>
Obrada poruke se obavlja u dva koraka:
</p>
<ol>
<li>Pretraga odgovarajuće metode.</li>
<li>Izvršavanje metode na objektu prijemniku.</li>

</ol>
</div>

<div class="column" style="float:right; width: 50%">

<div class="figure">
<p><img src="./slike/message_sending.png" alt="message_sending.png" />
</p>
</div>
</div>

</section>
<section id="slide-9-7">
<h3 id="9-7"><span class="section-number-3">9.7</span> Semantika <code>self</code> ključne reči</h3>
<ul>
<li><code>self</code> ključna reč se koristi u implementaciji metoda i <b>uvek</b> predstavlja
objekat prijemnik.</li>

</ul>


<div class="figure">
<p><img src="./slike/self_example.png" alt="self_example.png" />
</p>
</div>

<ul>
<li>Šta je rezultat izraza <code>A new foo</code> a šta izraza <code>B new foo</code>?</li>
<li>Šta je rezultat izraza <code>A new bar</code> a šta izraza <code>B new bar</code>?</li>

</ul>

</section>
<section id="slide-9-8">
<h3 id="9-8"><span class="section-number-3">9.8</span> Semantika <code>super</code> ključne reči</h3>

<div class="figure">
<p><img src="./slike/super_example.png" alt="super_example.png" />
</p>
</div>

<ul>
<li><code>super</code> predstavlja objekat prijemnik ali pretraga poruka započinje u nadklasi
klase u kojoj se <code>super</code> nalazi.</li>
<li>Šta su rezultati izraza <code>A new bar</code>, <code>B new bar</code> i <code>C new bar</code>?</li>

</ul>

</section>
<section id="slide-9-9">
<h3 id="9-9"><span class="section-number-3">9.9</span> <code>self</code> se određuje dinamički</h3>
<div class="column" style="float:left; width: 50%">

<div class="figure">
<p><img src="./slike/self_example.png" alt="self_example.png" />
</p>
</div>
</div>

<div class="column" style="float:right; width: 50%">
<p>
U metodi <code>A&gt;&gt;bar</code> kod <code>^self foo</code> ne znamo do vremena izvršavanja na koji <code>foo</code>
se poziv odnosi. To zavisi od klase konkretnog objekta prijemnika.
</p>
</div>

</section>
<section id="slide-9-10">
<h3 id="9-10"><span class="section-number-3">9.10</span> <code>super</code> se određuje statički</h3>
<div class="column" style="float:left; width: 50%">

<div class="figure">
<p><img src="./slike/super_static.png" alt="super_static.png" />
</p>
</div>
</div>

<div class="column" style="float:right; width: 50%">
<ul>
<li>U vreme kompajliranja znamo da metoda <code>B&gt;&gt;foo</code> referencira <code>A&gt;&gt;foo</code> putem <code>super</code>.</li>
<li>Uvek počinjemo pretragu u nadklasi klase koja sadrži metodu koja koristi <code>super</code>.</li>

</ul>
</div>

</section>
<section id="slide-9-11">
<h3 id="9-11"><span class="section-number-3">9.11</span> Poruke koje nemaju odgovarajuću metodu</h3>
<ul>
<li>Ukoliko metoda nije pronađena standardnim mehanizmom pretrage, prijemniku se
šalje poruka <code>doesNotUnderstand</code></li>
<li>Podrazumevana implementacija u <code>Object</code> klasi signalizira izuzetak
<code>MessageNotUndertood</code>.</li>

</ul>


<div class="figure">
<p><img src="./slike/doesNotUnderstand.png" alt="doesNotUnderstand.png" />
</p>
</div>

</section>
</section>
<section>
<section id="slide-10">
<h2 id="10"><span class="section-number-2">10</span> Implementacija <code>Boolean</code> tipa</h2>
<div class="outline-text-2" id="text-10">
</div>
</section>
<section id="slide-10-1">
<h3 id="10-1"><span class="section-number-3">10.1</span> Implementacija Boolean tipa</h3>
<p>
U Pharo Boolean tip ima odličan dizajn:
</p>

<ul>
<li><code>&amp;, |, not</code> - <i>eager</i></li>
<li><code>or:, and:</code> - <i>lazy</i></li>
<li><code>ifTrue:, ifTrue:ifFalse, ...</code></li>

</ul>

</section>
<section id="slide-10-2">
<h3 id="10-2"><span class="section-number-3">10.2</span> Za razmišljanje</h3>
<p>
U svetu gde imate samo dve vrednosti: <code>true</code> i <code>false</code> i razmenu poruka
</p>

<ul>
<li>kako implementirati <code>not</code>?</li>
<li>kako implementirati <code>or</code>?</li>

</ul>

</section>
<section id="slide-10-3">
<h3 id="10-3"><span class="section-number-3">10.3</span> <code>not</code></h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >false not
&gt; true
</code></pre>
</div>

<div class="org-src-container">

<pre><code class=" smalltalk" >true not
&gt; false
</code></pre>
</div>

</section>
<section id="slide-10-4">
<h3 id="10-4"><span class="section-number-3">10.4</span> Bez upotrebe uslova</h3>
<p>
Rešenje ne koristi uslove.
</p>

<p>
Uslovi bi svakako morali da budu bazirani na Bulovom tipu.
</p>

</section>
<section id="slide-10-5">
<h3 id="10-5"><span class="section-number-3">10.5</span> Rešenje koristi tri klase</h3>
<ul>
<li><code>Boolean</code> (apstraktna), <code>True</code> i <code>False</code></li>
<li><code>true</code> je singlton instanca klase <code>True</code></li>
<li><code>false</code> je singlton instanca klase <code>False</code></li>

</ul>


<div class="figure">
<p><img src="./slike/boolean.png" alt="boolean.png" />
</p>
</div>

</section>
<section id="slide-10-6">
<h3 id="10-6"><span class="section-number-3">10.6</span> Kako iskazujemo izbor u OOP?</h3>
<p>
U OOP, izbor iskazujemo:
</p>

<ul>
<li>Definisanjem klasa sa kompatibilnim metodama</li>
<li>Slanjem poruke instanci takve klase</li>

</ul>

<p>
Primer:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >x open
</code></pre>
</div>

<ul>
<li><code>x</code> može biti fajl, prozor, alat&#x2026;</li>
<li>Metod se selektuje u zavisnosti od klase objekta <code>x</code></li>
<li>U Python-u poznato kao <i>Duck Typing</i></li>

</ul>

</section>
<section id="slide-10-7">
<h3 id="10-7"><span class="section-number-3">10.7</span> Implementacija <code>not</code> operacije</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >False &gt;&gt; not
  "Negation −− answer true since the receiver is false."
  ^ true
</code></pre>
</div>

<div class="org-src-container">

<pre><code class=" smalltalk" >True &gt;&gt; not
  "Negation −− answer false since the receiver is true."
  ^ false
</code></pre>
</div>

</section>
<section id="slide-10-8">
<h3 id="10-8"><span class="section-number-3">10.8</span> Hijerarhija implementacije</h3>

<div class="figure">
<p><img src="./slike/boolean_not_hierarchy.png" alt="boolean_not_hierarchy.png" />
</p>
</div>

</section>
<section id="slide-10-9">
<h3 id="10-9"><span class="section-number-3">10.9</span> Pretraga poruke (<i>message lookup</i>) je izbor prave metode</h3>

<div class="figure">
<p><img src="./slike/boolean_not_lookup.png" alt="boolean_not_lookup.png" />
</p>
</div>

</section>
<section id="slide-10-10">
<h3 id="10-10"><span class="section-number-3">10.10</span> Implementacija <code>Boolean</code> klase</h3>
<ul>
<li><code>Boolean</code> je abstraktna klasa</li>
<li>Podklase su <code>True</code> i <code>False</code> koje implementiraju:
<ul>
<li>logičke operacije <code>&amp;</code> i <code>not</code></li>
<li>kontrolne strukture <code>and:</code>, <code>or:</code>, <code>ifTrue:</code>, <code>ifFalse:</code>, <code>ifTrue:ifFalse:</code>,
<code>ifFalse:ifTrue:</code></li>

</ul></li>

</ul>

<div class="org-src-container">

<pre><code class=" smalltalk" >Boolean&gt;&gt;not
  "Abstract method. Negation: Answer true if the receiver is
   false, answer false if the receiver is true."

  self subclassResponsibility
</code></pre>
</div>

</section>
<section id="slide-10-11">
<h3 id="10-11"><span class="section-number-3">10.11</span> Ponašanje <code>Or</code> operacije</h3>
<pre  class="example">
true | true −&gt; true
true | false −&gt; true
true | anything −&gt; true
</pre>

<pre  class="example">
false | true −&gt; true
false | false −&gt; false
false | anything −&gt; anything
</pre>

</section>
<section id="slide-10-12">
<h3 id="10-12"><span class="section-number-3">10.12</span> Implementacija <code>Or</code> operacije u <code>Boolean</code> klasi</h3>
<div class="org-src-container">

<pre><code class=" smalltalk" >Boolean &gt;&gt; | aBoolean
  "Abstract method. Evaluating Or: Evaluate the argument.
   Answer true if either the receiver or the argument is true."

  self subclassResponsibility
</code></pre>
</div>

</section>
<section id="slide-10-13">
<h3 id="10-13"><span class="section-number-3">10.13</span> Implementacija <code>Or</code> operacije u klasi <code>False</code></h3>
<pre  class="example">
false | true −&gt; true
false | false −&gt; false
false | anything −&gt; anything
</pre>

<div class="org-src-container">

<pre><code class=" smalltalk" >False &gt;&gt; | aBoolean
  "Evaluating Or −− answer with the argument, aBoolean."
  ^aBoolean
</code></pre>
</div>

</section>
<section id="slide-10-14">
<h3 id="10-14"><span class="section-number-3">10.14</span> Implementacija <code>Or</code> operacije u klasi <code>True</code></h3>
<pre  class="example">
true | true −&gt; true
true | false −&gt; true
true | anything −&gt; true
</pre>

<div class="org-src-container">

<pre><code class=" smalltalk" >True &gt;&gt; | aBoolean
  "Evaluating Or −− answer true since the receiver is true."
  ^true
</code></pre>
</div>

<p>
A pošto je prijemnik <code>true</code> možemo uraditi sledeće:
</p>

<div class="org-src-container">

<pre><code class=" smalltalk" >True &gt;&gt; | aBoolean
  "Evaluating Or −− answer true since the receiver is true."
  ^self
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-11">
<h2 id="11"><span class="section-number-2">11</span> Reference</h2>
<ul>
<li><a href="http://mooc.pharo.org">Pharo MOOC</a></li>
<li><a href="http://rmod-pharo-mooc.lille.inria.fr/MOOC/WebPortal/co/pharo.html">Video lekcije</a></li>
<li><a href="http://books.pharo.org">Pharo knjige</a></li>
<li><a href="http://amber-lang.net/">Client-side smalltalk - Amber</a></li>

</ul>
</section>
</section>
</div>
</div>
<script src="../../reveal.js/lib/js/head.min.js"></script>
<script src="../../reveal.js/js/reveal.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c/t',
rollingLinks: false,
keyboard: true,
mouseWheel: false,
fragmentInURL: true,
hashOneBasedIndex: false,
pdfSeparateFragments: true,

overview: true,
width: 1400,
height: 1000,
minScale: 0.30,
maxScale: 4.00,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'slide', // see README of reveal.js for options
transitionSpeed: 'default',

// Optional libraries used to extend reveal.js
dependencies: [
{src: '../../reveal.js/../reveal-plugins/menu/menu.js'},
{src: '../../reveal.js/../reveal-plugins/chalkboard/chalkboard.js'},
 { src: '../../reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
 { src: '../../reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }]

,keyboard: {67: function() { RevealChalkboard.toggleNotesCanvas() },	66: function() { RevealChalkboard.toggleChalkboard() },	46: function() { RevealChalkboard.clear() },	8: function() { RevealChalkboard.reset() },	68: function() { RevealChalkboard.download() },	},});
</script>
</body>
</html>
