<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>textX</title>
<meta name="author" content="Igor Dejanović"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="../../reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="../../reveal.js/css/theme/simple.css" id="theme"/>

<link rel="stylesheet" href="../../reveal-slides.css"/>

<link rel="stylesheet" href="../../highlight-styles/docco.css"/>
<link rel="stylesheet" href=""/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = '../../reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<base target="_blank">
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide">
<h1 class="title">textX</h1>
<h2 class="subtitle"></h2>
<h2 class="author">Prof. dr Igor Dejanović (<a href="mailto:igord at uns ac rs">igord at uns ac rs</a>)</h2>
<p class="date">Kreirano 2019-12-05 Thu 20:32, pritisni ESC za mapu, m za meni, Ctrl+Shift+F za pretragu</p>
</section>


<section>
<section id="slide-orgca2605e">
<h2 id="orgca2605e">Sadržaj</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#/slide-1">1. Osnovne osobine</a></li>
<li><a href="#/slide-2">2. Arhitektura</a></li>
<li><a href="#/slide-3">3. Instalacija</a></li>
<li><a href="#/slide-4">4. Upotreba</a></li>
<li><a href="#/slide-5">5. Primeri</a></li>
<li><a href="#/slide-6">6. Napredne tehnike - pyFlies</a></li>
<li><a href="#/slide-7">7. Podrška u editorima</a></li>
<li><a href="#/slide-8">8. Veče džeza i slobodnih formi - improvizacije</a></li>
</ul>
</div>

</section>
</section>
<section>
<section id="slide-1">
<h2 id="1"><span class="section-number-2">1</span> Osnovne osobine</h2>
<ul>
<li>100% Python kod</li>
<li>MIT licenca</li>
<li>Istovremeno definisanje gramatike i meta-modela - inspirisan sa <a href="https://www.eclipse.org/Xtext/">Xtext</a></li>
<li>Automatska konstrukcija modela - podrška za razrešavane referenci</li>
<li>Podrška za veze tipa celina-deo</li>
<li>Kontrola parsiranja (<i>whitespaces, case, keywords</i>&#x2026;)</li>
<li>Postprocesiranje objekata modela ili celog modela</li>
<li>Modularizacija gramatika - import</li>
<li>Vizualizacija modela i meta-modela</li>
<li>Dokumentacija i tutorijali dostupni na <a href="https://textx.github.io/textX/">https://textx.github.io/textX/</a></li>

</ul>

</section>
</section>
<section>
<section id="slide-2">
<h2 id="2"><span class="section-number-2">2</span> Arhitektura</h2>

<div class="figure">
<p><img src="./slike/textX.png" alt="textX.png" />
</p>
</div>

</section>
</section>
<section>
<section id="slide-3">
<h2 id="3"><span class="section-number-2">3</span> Instalacija</h2>
<div class="outline-text-2" id="text-3">
</div>
</section>
<section id="slide-3-1">
<h3 id="3-1"><span class="section-number-3">3.1</span> Instalacija</h3>
<ul>
<li>Sa PyPI</li>

</ul>
<pre  class="example">
$ mkdir ntp 
$ cd ntp    
$ python -m venv venv
$ source venv/bin/activate
$ pip install textX  
Looking in indexes: https://pypi.python.org/simple/
Collecting textX
  Using cached https://files.pythonhosted.org/packages/ff/df/33442dfb9ddfc2a9a84d60915ccf0602a5b04fdc46f523a7e939e588cd59/textX-1.8.0-py2.py3-none-any.whl
Collecting Arpeggio&gt;=1.9.0 (from textX)
  Using cached https://files.pythonhosted.org/packages/ec/5c/9cccf42a59406476f81993158376947a1487e3fcd84c01914c1ad17e54e1/Arpeggio-1.9.0-py2.py3-none-any.whl
Installing collected packages: Arpeggio, textX
Successfully installed Arpeggio-1.9.0 textX-1.8.0
</pre>

</section>
<section id="slide-3-2">
<h3 id="3-2"><span class="section-number-3">3.2</span> Instalacija razvojne verzije</h3>
<pre  class="example">
$ mkdir ntp 
$ cd ntp    
$ python -m venv venv
$ source venv/bin/activate
$ pip install https://github.com/textX/textX/archive/master.zip                                                                                                                                         1 ↵
Looking in indexes: https://pypi.python.org/simple/
Collecting https://github.com/textX/textX/archive/master.zip
  Downloading https://github.com/textX/textX/archive/master.zip
     / 6.3MB 6.0MB/s
Collecting Arpeggio&gt;=1.9.0 (from textX==1.8.0)
  Using cached https://files.pythonhosted.org/packages/ec/5c/9cccf42a59406476f81993158376947a1487e3fcd84c01914c1ad17e54e1/Arpeggio-1.9.0-py2.py3-none-any.whl
Collecting click==7.0 (from textX==1.8.0)
  Using cached https://files.pythonhosted.org/packages/fa/37/45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec/Click-7.0-py2.py3-none-any.whl
Installing collected packages: Arpeggio, click, textX
  Running setup.py install for textX ... done
Successfully installed Arpeggio-1.9.0 click-7.0 textX-1.8.0
</pre>

</section>
<section id="slide-installation">
<h3 id="installation"><span class="section-number-3">3.3</span> Instalacija za razvoj</h3>
<pre  class="example">
$ mkdir ntp 
$ cd ntp    
$ python -m venv venv
$ source venv/bin/activate
$ git clone git@github.com:textX/textX.git                     
Cloning into 'textX'...
Enter passphrase for key '/home/igor/.ssh/id_rsa': 
remote: Enumerating objects: 65, done.
remote: Counting objects: 100% (65/65), done.
remote: Compressing objects: 100% (56/56), done.
remote: Total 7649 (delta 23), reused 32 (delta 9), pack-reused 7584
Receiving objects: 100% (7649/7649), 9.20 MiB | 2.21 MiB/s, done.
Resolving deltas: 100% (4657/4657), done.
$ pip install -e textX                                             
Looking in indexes: https://pypi.python.org/simple/
Obtaining file:///home/igor/ntp/textX
Requirement already satisfied: Arpeggio&gt;=1.9.0 in ./venv/lib/python3.7/site-packages (from textX==1.8.0) (1.9.0)
Requirement already satisfied: click==7.0 in ./venv/lib/python3.7/site-packages (from textX==1.8.0) (7.0)
Installing collected packages: textX
  Found existing installation: textX 1.8.0
    Uninstalling textX-1.8.0:
      Successfully uninstalled textX-1.8.0
  Running setup.py develop for textX
Successfully installed textX
</pre>

</section>
</section>
<section>
<section id="slide-4">
<h2 id="4"><span class="section-number-2">4</span> Upotreba</h2>
<div class="outline-text-2" id="text-4">
</div>
</section>
<section id="slide-4-1">
<h3 id="4-1"><span class="section-number-3">4.1</span> Gramatika = meta-model + konkretna sintaksa</h3>
<div class="column" style="float:left; width: 50%">
<div class="org-src-container">

<pre><code class=" textx" >HelloWorldModel:
  'hello' to_greet+=Who[',']
;

Who:
  name = /[^,]*/
;
</code></pre>
</div>
</div>

<div class="column" style="float:right; width: 50%">
<div class="org-src-container">

<pre><code class=" python" >from textx import metamodel_from_file
hello_meta = metamodel_from_file('hello.tx')
</code></pre>
</div>

</div>


<div class="figure">
<p><img src="./hello.dot.png" alt="hello.dot.png" style="height: 500px;" />
</p>
</div>

</section>
<section id="slide-4-2">
<h3 id="4-2"><span class="section-number-3">4.2</span> Model = program</h3>
<div class="org-src-container">

<pre><code class=" example" >hello World, Solar System, Universe
</code></pre>
</div>


<div class="figure">
<p><img src="./slike/hello_parts.png" alt="hello_parts.png" style="height: 300px;" />
</p>
</div>

</section>
<section id="slide-4-3">
<h3 id="4-3"><span class="section-number-3">4.3</span> Parsiranje - instanciranje modela</h3>
<div class="org-src-container">

<pre><code class=" python" >example_hello_model = hello_meta.model_from_file('example.hello')
</code></pre>
</div>


<div class="figure">
<p><img src="./example.dot.png" alt="example.dot.png" style="height: 300px;" />
</p>
</div>


<ul>
<li>Model je graf Python objekata čija struktura je u skladu sa gramatikom (npr.
<code>HelloWorldModel</code> objekat sadrži Python listu <code>to_greet</code>).</li>
<li>Model možemo dalje interpretirati, analizirati, generisati kod&#x2026;</li>

</ul>

</section>
<section id="slide-4-4">
<h3 id="4-4"><span class="section-number-3">4.4</span> Provera i vizualizacija meta-modela</h3>
<ul>
<li>textX će pri parsiraju gramatike prijaviti sintaksne greške.</li>
<li><p>
Ako želimo možemo proveriti gramatiku u toku razvoja:
</p>

<div class="org-src-container">

<pre><code class=" bash" >textx check hello.tx
</code></pre>
</div>

<pre class="example">
/home/igor/repos/igordejanovic.github.io/courses/tech/textX/hello.tx: OK.
</pre></li>

<li><p>
U slučaju greške biće prijavljena tačna lokacija.
</p>

<pre  class="example">
Error in meta-model file.
Expected 'abstract_rule_ref' at position (6, 9) =&gt; ':   name |*= /[^,]*/ '.
</pre></li>

<li><p>
ili vizualizovati
</p>

<div class="org-src-container">

<pre><code class=" bash" >textx list-generators
</code></pre>
</div>

<pre class="example">
any -&gt; dot                    textX                         Generating dot visualizations from arbitrary models
textX -&gt; dot                  textX                         Generating dot visualizations from textX grammars
textX -&gt; PlantUML             textX                         Generating PlantUML visualizations from textX grammars
</pre>


<div class="org-src-container">

<pre><code class=" bash" >textx generate hello.tx --target dot
</code></pre>
</div>

<pre class="example">
Generating dot target from models:
/home/igor/repos/igordejanovic.github.io/courses/tech/textX/hello.tx
-&gt; /home/igor/repos/igordejanovic.github.io/courses/tech/textX/hello.dot
   To convert to png run "dot -Tpng -O hello.dot"
</pre></li>

</ul>


</section>
<section id="slide-4-5">
<h3 id="4-5"><span class="section-number-3">4.5</span> Robot primer</h3>
<div class="column" style="float:left; width: 50%">
<p>
fajl <code>robot.tx</code>
</p>
<div class="org-src-container">

<pre><code class=" textx" >Program:
  'begin'
    commands*=Command
  'end'
;

Command:
  InitialCommand | MoveCommand
;

InitialCommand:
  'initial' x=INT ',' y=INT
;

MoveCommand:
  direction=Direction (steps=INT)?
;

Direction:
  "up"|"down"|"left"|"right"
;

Comment:
  /\/\/.*$/
;
</code></pre>
</div>

</div>

<div class="column" style="float:right; width: 50%">
<p>
fajl <code>program.rbt</code>
</p>
<div class="org-src-container">

<pre><code class=" example" >begin
    initial 3, 1
    up 4
    left 9
    down
    right 1
end
</code></pre>
</div>
</div>

</section>
<section id="slide-4-6">
<h3 id="4-6"><span class="section-number-3">4.6</span> Instanciranje meta-modela</h3>
<div class="org-src-container">

<pre><code class=" python" >from textx import metamodel_from_file
robot_mm = metamodel_from_file('robot.tx')
</code></pre>
</div>


<div class="figure">
<p><img src="./robot.dot.png" alt="robot.dot.png" style="height: 500px;" />
</p>
</div>

<div class="org-src-container">

<pre><code class=" bash" >textx generate robot.tx --target dot
dot -Tpng -O robot.dot
</code></pre>
</div>

</section>
<section id="slide-4-7">
<h3 id="4-7"><span class="section-number-3">4.7</span> Parsiranje i instanciranje modela</h3>
<div class="org-src-container">

<pre><code class=" python" >robot_model = robot_mm.model_from_file('program.rbt')
</code></pre>
</div>

<pre  class="example">
begin
    initial 3, 1
    up 4
    left 9
    down
    right 1
end
</pre>


<div class="figure">
<p><img src="./program.dot.png" alt="program.dot.png" style="height: 300px;" />
</p>
</div>

<div class="org-src-container">

<pre><code class=" bash" >textx generate program.rbt --grammar robot.tx --target dot
dot -Tpng -O program.dot
</code></pre>
</div>

</section>
<section id="slide-4-8">
<h3 id="4-8"><span class="section-number-3">4.8</span> Šta raditi sa modelom?</h3>
<ul>
<li>Interpretiranje</li>
<li>Generisanje koda</li>
<li>Razne vrste analize i transformacije</li>

</ul>

</section>
<section id="slide-4-9">
<h3 id="4-9"><span class="section-number-3">4.9</span> Interpretiranje Robot modela</h3>
<div class="org-src-container">

<pre><code class=" python" >class Robot(object):

    def __init__(self):
        # Initial position is (0,0)
        self.x = 0
        self.y = 0

    def __str__(self):
        return "Robot position is {}, {}.".format(self.x, self.y)
</code></pre>
</div>

</section>
<section id="slide-4-10">
<h3 id="4-10"><span class="section-number-3">4.10</span> Interpretiranje Robot modela</h3>
<div class="org-src-container">

<pre><code class=" python" >def interpret(self, model):

    # model is an instance of Program
    for c in model.commands:

        if c.__class__.__name__ == "InitialCommand":
            print("Setting position to: {}, {}".format(c.x, c.y))
            self.x = c.x
            self.y = c.y
        else:
            dir = c.direction
            print("Going {} for {} step(s).".format(dir, c.steps))

            move = {
                "up": (0, 1),
                "down": (0, -1),
                "left": (-1, 0),
                "right": (1, 0)
            }[dir]

            # Calculate new robot position
            self.x += c.steps * move[0]
            self.y += c.steps * move[1]
</code></pre>
</div>

</section>
<section id="slide-4-11">
<h3 id="4-11"><span class="section-number-3">4.11</span> Interpretacija Robot modela</h3>
<div class="org-src-container">

<pre><code class=" python" >robot = Robot()
robot.interpret(robot_model)
</code></pre>
</div>

<div class="column" style="float:left; width: 50%">
<pre  class="example">
begin
    initial 3, 1
    up 4
    left 9
    down
    right 1
end
</pre>
</div>

<div class="column" style="float:right; width: 50%">

<pre class="example">
Setting position to: 3, 1
Robot position is 3, 1.
Going up for 4 step(s).
Robot position is 3, 5.
Going left for 9 step(s).
Robot position is -6, 5.
Going down for 0 step(s).
Robot position is -6, 5.
Going right for 1 step(s).
Robot position is -5, 5.
</pre>
</div>

<p class="attention" style="clear: both;">
<b>Problem:</b> Ako ne zadamo korak podrazumevano je 0 (textX definiše <i>default</i>
vrednosti za bazične tipove).
</p>

</section>
<section id="slide-4-12">
<h3 id="4-12"><span class="section-number-3">4.12</span> Object processor</h3>
<div class="column" style="float:left; width: 60%">
<div class="org-src-container">

<pre><code class=" python" >def move_command_processor(move_cmd):
    """
    This is object processor for MoveCommand instances.
    It implements a default step of 1 in case not given
    in the program.
    """

    if move_cmd.steps == 0:
        move_cmd.steps = 1
</code></pre>
</div>
</div>

<div class="column" style="float:right; width: 40%">
<div class="org-src-container">

<pre><code class=" textx" >MoveCommand:
  direction=Direction (steps=INT)?
;
</code></pre>
</div>
</div>

<p style="clear: both;">
Registracija procesora na meta-modelu:
</p>

<div class="org-src-container">

<pre><code class=" python" ># Register object processor for MoveCommand
robot_mm.register_obj_processors({'MoveCommand': move_command_processor})
</code></pre>
</div>

<p>
Sada se robot ponaša ispravno.
</p>

<pre class="example">
Setting position to: 3, 1
Robot position is 3, 1.
Going up for 4 step(s).
Robot position is 3, 5.
Going left for 9 step(s).
Robot position is -6, 5.
Going down for 1 step(s).
Robot position is -6, 4.
Going right for 1 step(s).
Robot position is -5, 4.
</pre>



</section>
</section>
<section>
<section id="slide-5">
<h2 id="5"><span class="section-number-2">5</span> Primeri</h2>
<div class="outline-text-2" id="text-5">
</div>
</section>
<section id="slide-5-1">
<h3 id="5-1"><span class="section-number-3">5.1</span> Generisanje koda - Entity primer</h3>
<ul>
<li>Referenciranje drugih objekata.</li>
<li>Upotreba obrađivača šablona (<b>Template Engines</b>) za generisanje koda.</li>
<li><a href="http://textx.github.io/textX/stable/tutorials/entity/">http://textx.github.io/textX/stable/tutorials/entity/</a></li>

</ul>

</section>
<section id="slide-5-2">
<h3 id="5-2"><span class="section-number-3">5.2</span> State Machine</h3>
<ul>
<li>Video tutorial</li>
<li><a href="http://textx.github.io/textX/stable/tutorials/state_machine/">http://textx.github.io/textX/stable/tutorials/state_machine/</a></li>

</ul>

</section>
<section id="slide-5-3">
<h3 id="5-3"><span class="section-number-3">5.3</span> Izrada mini kompajlera - ppci</h3>
<ul>
<li><a href="http://www.windel.nl/">Windel Bouwman</a></li>
<li><a href="https://ppci.readthedocs.io/en/latest/howto/toy.html">https://ppci.readthedocs.io/en/latest/howto/toy.html</a></li>

</ul>

</section>
</section>
<section>
<section id="slide-6">
<h2 id="6"><span class="section-number-2">6</span> Napredne tehnike - <a href="https://github.com/igordejanovic/pyFlies">pyFlies</a></h2>
</section>
</section>
<section>
<section id="slide-7">
<h2 id="7"><span class="section-number-2">7</span> Podrška u editorima</h2>
<ul>
<li>Visual Studio Code (<i>IntelliSense</i>, <i>Outline</i>, <i>Code highlighting</i>)
<ul>
<li><a href="https://github.com/textX/textX-LS">Tekući razvoj</a> - <i>Language Server Protocol</i></li>

</ul></li>
<li><a href="https://github.com/textX/textx-mode">Mod za Emacs</a></li>
<li><a href="https://github.com/textX/textX-ninja">Ninja IDE</a></li>

</ul>
</section>
</section>
<section>
<section id="slide-8">
<h2 id="8"><span class="section-number-2">8</span> Veče džeza i slobodnih formi - improvizacije</h2>
</section>
</section>
</div>
</div>
<script src="../../reveal.js/lib/js/head.min.js"></script>
<script src="../../reveal.js/js/reveal.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c/t',
rollingLinks: false,
keyboard: true,
mouseWheel: false,
fragmentInURL: true,
hashOneBasedIndex: false,
pdfSeparateFragments: true,

overview: true,
width: 1400,
height: 1000,
minScale: 0.30,
maxScale: 4.00,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'slide', // see README of reveal.js for options
transitionSpeed: 'default',

// Optional libraries used to extend reveal.js
dependencies: [
{src: '../../reveal.js/../reveal-plugins/menu/menu.js'},
{src: '../../reveal.js/../reveal-plugins/chalkboard/chalkboard.js'},
 { src: '../../reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
 { src: '../../reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }]

,keyboard: {67: function() { RevealChalkboard.toggleNotesCanvas() },	66: function() { RevealChalkboard.toggleChalkboard() },	46: function() { RevealChalkboard.clear() },	8: function() { RevealChalkboard.reset() },	68: function() { RevealChalkboard.download() },	},});
</script>
</body>
</html>
